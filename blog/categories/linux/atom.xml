<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: linux | I'm not a teapot]]></title>
  <link href="http://sohda.github.io/blog/categories/linux/atom.xml" rel="self"/>
  <link href="http://sohda.github.io/"/>
  <updated>2013-06-11T00:38:06+09:00</updated>
  <id>http://sohda.github.io/</id>
  <author>
    <name><![CDATA[Tomoko Sohda]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[syslogのことをちょっと調べたのでメモ]]></title>
    <link href="http://sohda.github.io/tomoko/2013/06/11/investigate-syslog/"/>
    <updated>2013-06-11T20:31:00+09:00</updated>
    <id>http://sohda.github.io/tomoko/2013/06/11/investigate-syslog</id>
    <content type="html"><![CDATA[<p>ログ収集をしていて気になったのでまとめました。  <br/>
/var/log/* の以下のログの役目(いつ誰が出力するのか)を調べてみた。</p>

<ul>
<li>dmesg</li>
<li>lastlog</li>
<li>statistics</li>
<li>wtmp</li>
</ul>


<h2>dmesg</h2>

<ul>
<li>いつ？

<ul>
<li>システム起動時からファイルシステムがマウントされる時点までの間</li>
</ul>
</li>
<li>何を？

<ul>
<li>カーネルのリングバッファの内容が記録される</li>
<li>システム起動時のメッセージや、稼働中のカーネル情報などを得ることができる</li>
<li>dmesgコマンドで参照できる</li>
</ul>
</li>
</ul>


<p>```sh
$ man dmesg</p>

<p>DESCRIPTION</p>

<pre><code>   dmesg is used to examine or control the kernel ring buffer.

   The program helps users to print out their bootup messages.  Instead of copying the
   messages by hand, the user need only:
          dmesg &gt; boot.messages
   and mail the boot.messages file to whoever can debug their problem.
</code></pre>

<p>```</p>

<h2>lastlog</h2>

<ul>
<li>いつ？

<ul>
<li>このファイルが作成された以降</li>
</ul>
</li>
<li>何を？

<ul>
<li>最終ログインの記録</li>
<li>lastlogコマンドで参照できる</li>
</ul>
</li>
</ul>


<p>```sh
$ man lastlog
…
説明</p>

<pre><code>   lastlog  は最終ログインの記録ファイル /var/log/lastlog の内容を整形して表示する。ロ
   グイン名・ポート・最終ログイン時刻、が表示される。オプションを指定しなかった場合 、
   デフォルトでは lastlog エントリを UID の数値でソートして表示する。
</code></pre>

<p>…
```</p>

<h2>statistics</h2>

<ul>
<li>いつ？

<ul>
<li>ctimeで指定されたフォーマットで表示された時刻から</li>
<li>統計情報が開始した時刻は、ctimeで指定されたフォーマットで表示される</li>
</ul>
</li>
<li>何を？

<ul>
<li>sendmailの統計情報が記録される</li>
<li>mailstatsコマンドで参照できる</li>
</ul>
</li>
</ul>


<p>```sh
$ mailstats
…
DESCRIPTION</p>

<pre><code>   The mailstats utility displays the current mail statistics.

   First,  the time at which statistics started being kept is displayed, in the format
   specified by ctime(3).  Then, the statistics for each mailer  are  displayed  on  a
   single line, each with the following white space separated fields:

          M           The mailer number.
          msgsfr      Number of messages from the mailer.
          bytes_from  Kbytes from the mailer.
          msgsto      Number of messages to the mailer.
          bytes_to    Kbytes to the mailer.
          msgsrej     Number of messages rejected.
          msgsdis     Number of messages discarded.
          msgsqur     Number of messages quarantined.
          Mailer      The name of the mailer.

   After  this display, a line totaling the values for all of the mailers is displayed
   (preceded with a ‘‘T’’), separated from the previous information by a line contain-
   ing  only  equals (‘‘=’’) characters.  Another line preceded with a ‘‘C’’ lists the
   number of TCP connections.
</code></pre>

<p>…
```</p>

<h2>wtmp</h2>

<ul>
<li>いつ？

<ul>
<li>このファイルが作成された以降</li>
</ul>
</li>
<li>何を？

<ul>
<li>ログインのうち成功したものの情報が記録される</li>
<li>再起動についてはrebootというユーザで記録が残る</li>
<li>wtmpコマンドで参照できる</li>
</ul>
</li>
</ul>


<p>```sh
$ man last
…
DESCRIPTION</p>

<pre><code>   Last searches back through the file /var/log/wtmp (or the file designated by the -f
   flag) and displays a list of all users logged in (and out) since that file was cre-
   ated.  Names of users and tty’s can be given, in which case  last  will  show  only
   those  entries matching the arguments.  Names of ttys can be abbreviated, thus last
   0 is the same as last tty0.

   When last catches a SIGINT signal (generated by the interrupt key, usually control-
   C)  or  a  SIGQUIT signal (generated by the quit key, usually control-\), last will
   show how far it has searched through the file; in the case  of  the  SIGINT  signal
   last will then terminate.

   The  pseudo user reboot logs in each time the system is rebooted.  Thus last reboot
   will show a log of all reboots since the log file was created.

   Lastb is the same as last, except that by default  it  shows  a  log  of  the  file
   /var/log/btmp, which contains all the bad login attempts.
</code></pre>

<p>…
```</p>
]]></content>
  </entry>
  
</feed>
